<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Article aléatoire - Terre & Nature</title>
  <script>
    async function redirectToRandomArticle() {
      try {
        const response = await fetch('https://api.allorigins.win/raw?url=https://terrenature.ch/news-sitemap.xml');
        const text = await response.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(text, 'text/xml');
        const locElements = xml.getElementsByTagName('loc');
        const urls = Array.from(locElements).map(e => e.textContent);
        const randomUrl = urls[Math.floor(Math.random() * urls.length)];
        window.location.href = randomUrl;
      } catch (error) {
        document.body.innerHTML = "<h2>Erreur de chargement</h2><p>Impossible de charger un article aléatoire. Réessaie plus tard.</p>";
        console.error("Erreur de redirection :", error);
      }
    }

    window.onload = redirectToRandomArticle;
  </script>
</head>
<body>
  <p style="font-size:18px; text-align:center; margin-top: 20%;">Redirection vers un article en cours...</p>
</body>
</html>
